[{"D:\\learn-qxx\\assembly-tool-react\\src\\index.js":"1","D:\\learn-qxx\\assembly-tool-react\\src\\App.js":"2","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\index.js":"3","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditor\\index.jsx":"4","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\createVisualEditorConfig.js":"5","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\createNewBlock.js":"6","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditor\\style\\index.js":"7","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditorBlock\\index.jsx":"8","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditorBlock\\style\\index.js":"9","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\commandQueueHandler.js":"10","D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\commandHook.js":"11"},{"size":231,"mtime":1611997689553,"results":"12","hashOfConfig":"13"},{"size":267,"mtime":1611997689553,"results":"14","hashOfConfig":"13"},{"size":76,"mtime":1611997689555,"results":"15","hashOfConfig":"13"},{"size":11177,"mtime":1612003806616,"results":"16","hashOfConfig":"13"},{"size":363,"mtime":1611997689556,"results":"17","hashOfConfig":"13"},{"size":255,"mtime":1611997689555,"results":"18","hashOfConfig":"13"},{"size":21,"mtime":1611997689554,"results":"19","hashOfConfig":"13"},{"size":1781,"mtime":1611997689554,"results":"20","hashOfConfig":"13"},{"size":21,"mtime":1611997689555,"results":"21","hashOfConfig":"13"},{"size":844,"mtime":1612003107209,"results":"22","hashOfConfig":"13"},{"size":2514,"mtime":1612002775802,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1i8o4wo",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"34"},"D:\\learn-qxx\\assembly-tool-react\\src\\index.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\App.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\index.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditor\\index.jsx",["48"],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\createVisualEditorConfig.js",[],["49","50"],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\createNewBlock.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditor\\style\\index.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditorBlock\\index.jsx",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\VisualEditorBlock\\style\\index.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\commandQueueHandler.js",[],"D:\\learn-qxx\\assembly-tool-react\\src\\packages\\utils\\commandHook.js",["51"],"import React, {useState} from 'react';\r\n\r\nfunction useCommander() {\r\n    let [commondState, setCommandState] = useState({\r\n        current: -1,\r\n        queue: [],\r\n        commands: {}\r\n    })\r\n\r\n    // 设置命令队列\r\n    // data = {\r\n    //     name: '',                                                       //命令唯一标识\r\n    //     keyboard: '' || [],                                             //命令监听的快捷键\r\n    //     execute: ()=>{},                                                // 命令被执行时候的所做的内容\r\n    //     followQueue: true,                                              // 命令执行完后，是否将该命令添加至命令队列\r\n    // }\r\n    setCommandState = function (data = {}) {\r\n        commondState.commands[data.name] = function() {\r\n            const {undo, redo} = data.execute();\r\n            // 是否添加至命令队列\r\n            if(data.followQueue) {\r\n                commondState.queue.push({redo, undo})\r\n                // 添加命令时，current自动+1\r\n                commondState.current += 1;\r\n            }\r\n            redo();\r\n        }\r\n    }\r\n\r\n    setCommandState({\r\n        name: 'undo',           // 撤销命令\r\n        keybord: 'ctrl+z',\r\n        followQueue: false, // 只需要redo事件\r\n        execute: function() {\r\n            // 命令被执行时，要做的事情\r\n            return {\r\n                // 撤销命令只需要一个redo事件\r\n                redo: function() {\r\n                    let {current, queue} = commondState;\r\n                    if(current === -1) return\r\n                    const {undo} = queue[current];\r\n                    undo && undo();\r\n                    // 撤销命令时，current自动-1\r\n                    commondState.current -= 1;\r\n                },\r\n            }\r\n        }\r\n    });\r\n\r\n    setCommandState({\r\n        name: 'redo',   //重做命令\r\n        keyboard: [\r\n            'ctrl+y',\r\n            'ctrl+shift+z',\r\n        ],\r\n        followQueue: false,\r\n        execute: function() {\r\n            return {\r\n                redo: function() {\r\n                    let {current, queue} = commondState;\r\n                    if(!queue[current]) return\r\n                    const {redo} = queue[current];\r\n                    redo && redo();\r\n                    current +=1;\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return {\r\n        commondState,\r\n        setCommandState\r\n    }\r\n}\r\n\r\nexport default useCommander;",{"ruleId":"52","severity":1,"message":"53","line":221,"column":48,"nodeType":"54","messageId":"55","endLine":221,"endColumn":50},{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","severity":1,"message":"61","line":1,"column":8,"nodeType":"62","messageId":"63","endLine":1,"endColumn":13},"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","no-native-reassign",["64"],"no-negated-in-lhs",["65"],"no-unused-vars","'React' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]